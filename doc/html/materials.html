<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Voxels Library: Materials</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Voxels Library
   &#160;<span id="projectnumber">0.5</span>
   </div>
   <div id="projectbrief">Voxel grid manipulation and surface generation library (c) 2014 Stoyan Nikolov</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('materials.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Materials </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Voxels</b> allows setting different materials to parts of the surface it polygonizes. Each voxel has two properties associated with the material - a material id (one byte - up to 255 ids for the surface) and a blend id.</p>
<h2>Material Map</h2>
<p>The material id associated with each voxel has to be interpreted somehow and <b>Voxels</b> transforms it in a set of 6 textures. A triplet of textures represents one material. Three textures are used because UV coordinates can't be generated for the volume surface and hence the mapping of the texture on the triangles becomes problematic. <b>Voxels</b> encourages the use of <em>Triplanar texture projection</em> during rendering. In essence <em>triplanar projection</em> uses the <em>normal</em> of the surface to select a texel among 3 textures. One textures is used for the <em>top</em> of the surface, one for all its <em>sides</em> and one for the <em>bottom</em> facing parts.</p>
<p><b>Voxels</b> generates two sets of textures for each material id in order to have smooth transitions between materials. The <em>blend</em> parameter of each voxel is governs how much to take from the first set of textures and how much from the second. An application that creates or edits the voxel grid must take care to generate smooth varying values for the <em>blend</em> parameter, otherwise abrupt transitions might appear.</p>
<p>For each material id only two sets of textures get generated which means that you can't have a voxel where &gt; 2 distinct materials meet or an abrupt texture change will happen there. This is rarely a problem for virtual terrains for which <b>Voxels</b> is currently designed. During editing care should be taken to ensure that materials are properly generated to accommodate the different combinations of materials that meet each other.</p>
<p>The mapping from material id to texture id must be accomplished by the application because the texture management is done in it. The application must implement the <em><a class="el" href="class_voxels_1_1_material_map.html">Voxels::MaterialMap</a></em> class and pass an objects of that type to the <em><a class="el" href="class_voxels_1_1_polygonizer.html#a653261f80031e15e0290f8969766b6c9">Voxels::Polygonizer::Execute</a></em> method. This object must map material ids passed by <b>Voxels</b> to texture ids that have a meaning for the rendering system and can later be used when drawing the surface.</p>
<h2>Rendering</h2>
<p>Surfaces created by <b>Voxels</b> should be textured via <em>triplanar projection</em>. If the rendering API supports texture arrays, selecting which texture to use is relatively simple.</p>
<p>The texture ids required for each vertex are encoded in the <em>Textures</em> property of the <em><a class="el" href="struct_voxels_1_1_polygon_vertex.html">Voxels::PolygonVertex</a></em> structure.</p>
<div class="fragment"><div class="line">    <span class="keyword">union </span>{</div>
<div class="line">        <span class="keyword">struct </span>{</div>
<div class="line">            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> Reserved;</div>
<div class="line">            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> Blend;</div>
<div class="line">            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> Uxz;</div>
<div class="line">            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> Txz;</div>
<div class="line"></div>
<div class="line">            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> Uny;</div>
<div class="line">            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> Upy;</div>
<div class="line">            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> Tny;</div>
<div class="line">            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> Tpy;</div>
<div class="line">        } TextureIndices;</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">unsigned</span> TI[2];</div>
<div class="line">    } Textures;</div>
</div><!-- fragment --><p>The texture triplets here are called T and U. Txz and Uxz are the ids of the textures for the sides of the surface. The Tny and Uny are the <em>bottom</em> texture ids while the Tpy and Upy the <em>top</em> ones. The <em>Blend</em> parameter tells how to mix the two sets of textures.</p>
<p>For shader code that performs drawing with materials please consult the examples accompanying <b>Voxels</b>.</p>
<p>If your target hardware doesn't support texture arrays than you should resort to texture atlases. Extensive detail on the technique can be found in Eric Lengyel's Thesis about the TransVoxel algorithm on <a href="http://www.terathon.com/voxels/">http://www.terathon.com/voxels/</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Feb 10 2014 21:24:20 for Voxels Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
